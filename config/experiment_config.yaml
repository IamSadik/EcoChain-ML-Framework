# EcoChain-ML Experiment Configuration

# ML Models to Test
models:
  - name: "resnet18"
    type: "image_classification"
    complexity: 11.7  # Million parameters
    input_size: [224, 224, 3]
    
  - name: "mobilenet_v2"
    type: "image_classification"
    complexity: 3.5
    input_size: [224, 224, 3]
    
  - name: "bert_base"
    type: "text_classification"
    complexity: 110
    input_size: 512  # sequence length
    
  - name: "efficientnet_b0"
    type: "image_classification"
    complexity: 5.3
    input_size: [224, 224, 3]

# Model Compression Techniques
compression:
  quantization:
    enabled: true
    method: "dynamic"  # dynamic, static, qat
    dtype: "int8"
    
  pruning:
    enabled: true
    pruning_ratio: 0.3
    method: "magnitude"
    
  knowledge_distillation:
    enabled: false
    temperature: 3.0

# Workload Configuration
# FIXED: Increased from 1000 to 5000 tasks for statistical robustness
workload:
  num_tasks: 5000  # FIXED: Was 1000 (too light for production claims)
  duration_hours: 168  # FIXED: 7 days simulation (was 10h)
  task_distribution: "poisson"  # poisson, uniform, burst
  arrival_rate: 200  # FIXED: 200 tasks per hour (was 100)
  arrival_rate_per_hour: 200  # tasks per hour (for compatibility)
  task_types:
    - type: "image_classification"
      probability: 0.5
      avg_execution_time_sec: 0.5
      
    - type: "text_classification"
      probability: 0.3
      avg_execution_time_sec: 0.8
      
    - type: "object_detection"
      probability: 0.2
      avg_execution_time_sec: 1.2

# FIXED: Statistical significance parameters
statistical_analysis:
  num_runs: 10  # Multiple runs for confidence intervals
  confidence_level: 0.95  # 95% confidence intervals
  random_seeds: [42, 123, 456, 789, 1011, 1213, 1415, 1617, 1819, 2021]

# Renewable Energy Traces
renewable_traces:
  solar:
    pattern: "sinusoidal"  # Real traces will be generated
    peak_hour: 12  # noon
    duration_hours: 12  # 6 AM to 6 PM
    variability: 0.2
    
  wind:
    pattern: "stochastic"
    mean_capacity_factor: 0.35
    variability: 0.4

# Baseline Comparison Methods
baselines:
  - name: "standard"
    description: "No optimization"
    energy_aware: false
    dvfs_enabled: false
    blockchain_enabled: false
    compression_enabled: false
    
  - name: "compression_only"
    description: "INT8 quantization only (standard practice baseline)"
    energy_aware: false
    dvfs_enabled: false
    blockchain_enabled: false
    compression_enabled: true
    
  - name: "energy_aware_only"
    description: "Energy-aware scheduling without blockchain"
    energy_aware: true
    dvfs_enabled: true
    blockchain_enabled: false
    compression_enabled: true
    
  - name: "blockchain_only"
    description: "Blockchain verification without energy optimization"
    energy_aware: false
    dvfs_enabled: false
    blockchain_enabled: true
    compression_enabled: true
    
  - name: "ecochain_ml"
    description: "Full EcoChain-ML framework"
    energy_aware: true
    dvfs_enabled: true
    blockchain_enabled: true
    compression_enabled: true

# Ablation Study Components
ablation_components:
  - component: "renewable_prediction"
    description: "LSTM-based renewable energy prediction"
    
  - component: "dvfs"
    description: "Dynamic voltage/frequency scaling"
    
  - component: "model_compression"
    description: "Quantization and pruning"
    
  - component: "blockchain_verification"
    description: "PoS-based verification layer"

# Scalability Test Parameters
# UPDATED: Added 64 and 128 node tests for production-scale evaluation
# UPDATED: Doubled task counts to demonstrate scalability at larger scale
scalability:
  node_counts: [4, 8, 16, 32, 64, 128]  # ADDED: 64, 128 nodes for large-scale testing
  task_counts: [1000, 2500, 5000, 10000, 15000, 20000]  # DOUBLED: Up to 20K tasks
  
# Metrics to Collect
metrics:
  energy:
    - total_energy_kwh
    - energy_per_inference
    - renewable_utilization_percent
    
  carbon:
    - total_carbon_gco2
    - carbon_intensity
    - carbon_savings_percent
    
  performance:
    - avg_latency_ms
    - throughput_tasks_per_sec
    - task_completion_rate
    
  blockchain:
    - verification_time_ms
    - blockchain_overhead_percent
    - transaction_success_rate
    
  cost:
    - operational_cost_usd
    - cost_savings_percent
    - carbon_credits_earned_usd  # FIXED: Track credits earned
    - net_benefit_usd  # FIXED: Track net profit from blockchain

# Output Configuration
output:
  save_metrics: true
  save_plots: true
  save_logs: true
  plot_format: "png"  # png for better compatibility
  log_level: "INFO"
  save_confidence_intervals: true  # FIXED: Save CI data
  save_statistical_tests: true  # FIXED: Save t-test results